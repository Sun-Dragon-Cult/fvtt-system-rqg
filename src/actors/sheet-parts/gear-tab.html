<nav class="gear-tabs tabs" data-group="gear-view">
  <h3 class="item" title="View by Item Type" data-group="gear-view" data-tab="by-item-type"><img src="{{gearViewIcon 'byItemType'}}"> View by Item Type</h3>
  <h3 class="item" title="View by Location" data-group="gear-view" data-tab="by-location"><img src="{{gearViewIcon 'byLocation'}}"> View by location</h3>
</nav>


<section class="gear-body">
  <div class="tab by-location" data-group="gear-view" data-tab="by-location">

    <article>
      <h2>Gear</h2>
      <div class="grid location-row">
        <div class="headings"></div>
        <div class="head1">Name</div>
        <div class="head2" style="width:45px">ENC</div>
        <div class="head3"></div>
        <div class="head4" style="width:85px">Location</div>
      </div>
      <ul class="location virtual">
        {{#each itemLocationTree.contains}}
        {{> "systems/rqg/actors/sheet-parts/physical-item-location.html"}}
        {{/each}}
      </ul>
    </article>
  </div>

  <div class="tab by-item-type" data-group="gear-view" data-tab="by-item-type">
    <div class="gear-wrapper flex-row">
      <article class="flex-1">
        <h2>Gear</h2>
        <div class="grid gear">
          <div class="headings"></div>
          <div class="head1"></div>
          <div class="head2">Name</div>
          <div class="head3"></div>
          <div class="head4"><span class="text-right">Price</span></div>
          <div class="head5"><span class="text-right">ENC</span></div>
          <div class="head6"></div>
          <div class="head7">Location</div>
          {{#each ownedItems.gear}}
          {{#if (eq data.data.physicalItemType "unique")}}
          <div data-item-id="{{id}}" class="gear contextmenu"><img class="item" src="{{img}}"></div>
          <div data-item-id="{{id}}" class="gear contextmenu">{{name}}</div>
          <div data-item-id="{{id}}" class="gear contextmenu">{{!-- TODO REMOVE QUANTITY --}}</div>
          <div data-item-id="{{id}}" class="gear contextmenu">
            <span class="text-right">{{#if data.data.price.estimated}}{{currency data.data.price.estimated 'L'}}{{/if}}</span>
          </div>
          <div data-item-id="{{id}}" class="gear contextmenu">
            <span class="text-right">{{multiply data.data.quantity data.data.encumbrance}}</span>
          </div>
          <div data-item-id="{{id}}" data-item-equipped-toggle class="gear contextmenu">
            <img class="equipped-status text-center" title="{{data.data.equippedStatus}}"
                 src="{{equippedIcon data.data.equippedStatus}}">
          </div>
          <div data-item-id="{{id}}" class="gear contextmenu">
            <input type="text" list="locations" data-item-edit-value="data.location" value="{{data.data.location}}"
                   size="10">
          </div>
          {{/if}}
          {{/each}}
        </div>
      </article>

      <div class="flex-1">
        <article>
          <h2>Currency</h2>
          <div class="grid gear">
            <div class="headings"></div>
            <div class="head1"></div>
            <div class="head2">Name</div>
            <div class="head3"><span class="text-right">Qty</span></div>
            <div class="head4"><span class="text-right">Price</span></div>
            <div class="head5"><span class="text-right">ENC</span></div>
            <div class="head6"></div>
            <div class="head7">Location</div>
            {{#each ownedItems.gear}}
            {{#if (eq data.data.physicalItemType "currency")}}
            <div data-item-id="{{id}}" class="gear contextmenu"><img class="item" src="{{img}}"></div>
            <div data-item-id="{{id}}" class="gear contextmenu">{{name}}</div>
            <div data-item-id="{{id}}" class="gear contextmenu">
              <input type="number" min="0" max="999999" data-item-edit-value="data.quantity" value="{{data.data.quantity}}">
            </div>
            <div data-item-id="{{id}}" class="gear contextmenu">
              <span class="text-right">{{#if data.data.price.estimated}}{{currency data.data.price.estimated 'L'}}{{/if}}</span>
            </div>
            <div data-item-id="{{id}}" class="gear contextmenu">
              <span class="text-right">{{multiply data.data.quantity data.data.encumbrance}}</span>
            </div>
            <div data-item-id="{{id}}" data-item-equipped-toggle class="gear contextmenu">
              <img class="equipped-status text-center" title="{{data.data.equippedStatus}}"
                   src="{{equippedIcon data.data.equippedStatus}}">
            </div>
            <div data-item-id="{{id}}" class="gear contextmenu">
              <input type="text" list="locations" data-item-edit-value="data.location" value="{{data.data.location}}"
                     size="10">
            </div>
            {{/if}}
            {{/each}}
          </div>
        </article>

        <article>
          <h2>Consumables</h2>
          <div class="grid gear">
            <div class="headings"></div>
            <div class="head1"></div>
            <div class="head2">Name</div>
            <div class="head3"><span class="text-right">Qty</span></div>
            <div class="head4"><span class="text-right">Price</span></div>
            <div class="head5"><span class="text-right">ENC</span></div>
            <div class="head6"></div>
            <div class="head7">Location</div>
            {{#each ownedItems.gear}}
            {{#if (eq data.data.physicalItemType "consumable")}}
            <div data-item-id="{{id}}" class="gear contextmenu"><img class="item" src="{{img}}"></div>
            <div data-item-id="{{id}}" class="gear contextmenu">{{name}}</div>
            <div data-item-id="{{id}}" class="gear contextmenu">
              <span class="text-right">{{data.data.quantity}}</span>
            </div>
            <div data-item-id="{{id}}" class="gear contextmenu">
              <span class="text-right">{{#if data.data.price.estimated}}{{currency data.data.price.estimated 'L'}}{{/if}}</span>
            </div>
            <div data-item-id="{{id}}" class="gear contextmenu">
              <span class="text-right">{{multiply data.data.quantity data.data.encumbrance}}</span>
            </div>
            <div data-item-id="{{id}}" data-item-equipped-toggle class="gear contextmenu">
              <img class="equipped-status text-center" title="{{data.data.equippedStatus}}"
                   src="{{equippedIcon data.data.equippedStatus}}">
            </div>
            <div data-item-id="{{id}}" class="gear contextmenu">
              <input type="text" list="locations" data-item-edit-value="data.location" value="{{data.data.location}}"
                     size="10">
            </div>
            {{/if}}
            {{/each}}
            {{#each ownedItems.missileWeapon}}
            {{#if (eq data.data.physicalItemType "consumable")}}
            <div data-item-id="{{id}}" class="gear contextmenu"><img class="item" src="{{img}}"></div>
            <div data-item-id="{{id}}" class="gear contextmenu">{{name}}</div>
            <div data-item-id="{{id}}" class="gear contextmenu">
              <span class="text-right">{{data.data.quantity}}</span>
            </div>
            <div data-item-id="{{id}}" class="gear contextmenu">
              <span class="text-right">{{#if data.data.price.estimated}}{{currency data.data.price.estimated 'L'}}{{/if}}</span>
            </div>
            <div data-item-id="{{id}}" class="gear contextmenu">
              <span class="text-right">{{multiply data.data.quantity data.data.encumbrance}}</span>
            </div>
            <div data-item-id="{{id}}" data-item-equipped-toggle class="gear contextmenu">
              <img class="equipped-status text-center" title="{{data.data.equippedStatus}}"
                   src="{{equippedIcon data.data.equippedStatus}}">
            </div>
            <div data-item-id="{{id}}" class="gear contextmenu">
              <input type="text" list="locations" data-item-edit-value="data.location" value="{{data.data.location}}"
                     size="10">
            </div>
            {{/if}}
            {{/each}}
          </div>
        </article>
      </div>
    </div>

    <article>
      <h2>Melee Weapons & Shields</h2>
      <div class="grid weapon">
        <div class="headings"></div>
        <div class="head1"></div>
        <div class="head2">Name</div>
        <div class="head3">Skill</div>
        <div class="head4"><span class="text-center">Damage</span></div>
        <div class="head5"><span class="text-right">STR</span></div>
        <div class="head6"><span class="text-right">DEX</span></div>
        <div class="head7"><span class="text-right">HP</span></div>
        <div class="head8"><span class="text-right">Price</span></div>
        <div class="head9"><span class="text-right">ENC</span></div>
        <div class="head10"></div>
        <div class="head11">Location</div>

        {{#each ownedItems.meleeWeapon}}
        {{#unless data.data.isNatural}}
        <div data-item-id="{{id}}" class="gear contextmenu"><img class="item" src="{{img}}"></div>
        <div data-item-id="{{id}}" class="gear contextmenu">{{name}}</div>
        <div data-item-id="{{id}}" class="gear contextmenu">{{skillname data.data.skillId @root.data._id @root.tokenId}}</div>
        <div data-item-id="{{id}}" class="gear contextmenu"><span class="text-center">{{data.data.damage}}</span></div>
        <div data-item-id="{{id}}" class="gear contextmenu"><span class="text-right">{{data.data.minStrength}}</span>
        </div>
        <div data-item-id="{{id}}" class="gear contextmenu"><span class="text-right">{{data.data.minDexterity}}</span>
        </div>
        <div data-item-id="{{id}}" class="gear contextmenu"><span
          class="text-right">{{data.data.hitPoints.value}}</span>
        </div>
        <div data-item-id="{{id}}" class="gear contextmenu">
          <span class="text-right">{{#if data.data.price.estimated}}{{currency data.data.price.estimated 'L'}}{{/if}}</span>
        </div>
        <div data-item-id="{{id}}" class="gear contextmenu"><span class="text-right">{{data.data.encumbrance}}</span>
        </div>
        <div data-item-id="{{id}}" data-item-equipped-toggle class="gear contextmenu">
          <img class="equipped-status text-center" title="{{data.data.equippedStatus}}"
               src="{{equippedIcon data.data.equippedStatus}}">
        </div>
        <div data-item-id="{{id}}" class="gear contextmenu">
          <input type="text" list="locations" data-item-edit-value="data.location" value="{{data.data.location}}"
                 size="10">
        </div>
        {{/unless}}
        {{/each}}
      </div>
    </article>

    <article>
      <h2>Missile Weapons</h2>
      <div class="grid weapon">
        <div class="headings"></div>
        <div class="head1"></div>
        <div class="head2">Name</div>
        <div class="head3">Skill</div>
        <div class="head4"><span class="text-center">Damage</span></div>
        <div class="head5"><span class="text-right">STR</span></div>
        <div class="head6"><span class="text-right">DEX</span></div>
        <div class="head7"><span class="text-right">HP</span></div>
        <div class="head8"><span class="text-right">Price</span></div>
        <div class="head9"><span class="text-right">ENC</span></div>
        <div class="head10"></div>
        <div class="head11">Location</div>

        {{#each ownedItems.missileWeapon}}
        {{#if (or data.data.isProjectileWeapon data.data.isThrownWeapon)}}
        <div data-item-id="{{id}}" class="gear contextmenu"><img class="item" src="{{img}}"></div>
        <div data-item-id="{{id}}" class="gear contextmenu">{{name}}</div>
        <div data-item-id="{{id}}" class="gear contextmenu">{{skillname data.data.skillId @root.data._id @root.tokenId}}</div>
        <div data-item-id="{{id}}" class="gear contextmenu"><span class="text-center">{{data.data.damage}}</span></div>
        <div data-item-id="{{id}}" class="gear contextmenu"><span class="text-right">{{data.data.minStrength}}</span>
        </div>
        <div data-item-id="{{id}}" class="gear contextmenu"><span class="text-right">{{data.data.minDexterity}}</span>
        </div>
        <div data-item-id="{{id}}" class="gear contextmenu"><span
          class="text-right">{{data.data.hitPoints.value}}</span>
        </div>
        <div data-item-id="{{id}}" class="gear contextmenu">
          <span class="text-right">{{#if data.data.price.estimated}}{{currency data.data.price.estimated 'L'}}{{/if}}</span>
        </div>
        <div data-item-id="{{id}}" class="gear contextmenu"><span class="text-right">{{data.data.encumbrance}}</span>
        </div>
        <div data-item-id="{{id}}" data-item-equipped-toggle class="gear contextmenu">
          <img class="equipped-status text-center" title="{{data.data.equippedStatus}}"
               src="{{equippedIcon data.data.equippedStatus}}">
        </div>
        <div data-item-id="{{id}}" class="gear contextmenu">
          <input type="text" list="locations" data-item-edit-value="data.location" value="{{data.data.location}}"
                 size="10">
        </div>
        {{/if}}
        {{/each}}
      </div>
    </article>

    <article>
      <h2>Armor</h2>
      <div class="grid armor">
        <div class="headings"></div>
        <div class="head1"></div>
        <div class="head2">Name</div>
        <div class="head3"><span class="text-right">Absorbs</span></div>
        <div class="head4">Hitlocations</div>
        <div class="head5"><span class="text-right">moveQuietly</span></div>
        <div class="head6"><span class="text-right">Price</span></div>
        <div class="head7"><span class="text-right">ENC</span></div>
        <div class="head8"></div>
        <div class="head9">Location</div>
        {{#each ownedItems.armor}}
        <div data-item-id="{{id}}" class="gear contextmenu"><img class="item" src="{{img}}"></div>
        <div data-item-id="{{id}}" class="gear contextmenu">{{name}}</div>
        <div data-item-id="{{id}}" class="gear contextmenu">
          <span class="text-right">{{data.data.absorbs}}</span>
        </div>
        <div data-item-id="{{id}}" class="gear contextmenu">[
          {{#each data.data.hitLocations}}
          {{this}},
          {{/each}}
          ]
        </div>
        <div data-item-id="{{id}}" class="gear contextmenu">
          <span class="text-right">{{data.data.moveQuietlyPenalty}}</span>
        </div>
        <div data-item-id="{{id}}" class="gear contextmenu">
          <span class="text-right">{{#if data.data.price.estimated}}{{currency data.data.price.estimated 'L'}}{{/if}}</span>
        </div>
        <div data-item-id="{{id}}" class="gear contextmenu">
          <span class="text-right">{{data.data.encumbrance}}</span>
        </div>
        <div data-item-id="{{id}}" data-item-equipped-toggle class="gear contextmenu">
          <img class="equipped-status text-center" title="{{data.data.equippedStatus}}"
               src="{{equippedIcon data.data.equippedStatus}}">
        </div>
        <div data-item-id="{{id}}" class="gear contextmenu">
          <input type="text" list="locations" data-item-edit-value="data.location" value="{{data.data.location}}"
                 size="10">
        </div>
        {{/each}}
      </div>
    </article>
  </div>
</section>
<datalist id="locations">
  {{#each locations}}
  <option value="{{this}}">{{this}}</option>
  {{/each}}
</datalist>
